---
title: 【技术探索七】
tags: [技术探索]

author: Yude Bai
date: 2023-09-09
img: /medias/featureimages/17.jpg
summary: 深度学习库安装 --- torch/tf/keras

toc: true
---


# :whale: 深度学习库安装 --- torch/tf/keras :whale:

## 1、本地配置

Win 11（无 N 卡，16G+256G/1T），Anaconda 23.7.2（Anaconda 环境下 python 为 3.11.4），PyCharm 2023.2，VSCode 1.81.1。


## 2、安装目标

在本地实现 torch、tensorflow、keras 等基本 DL 库的安装。


## 3、安装 Anaconda

首先安装 Anaconda 23.7.2，安装过程中唯一需要注意的是 **path** 的设定。需要在系统环境变量中添加以下三个目录：
```
Anaconda 安装路径
Anaconda 安装路径\Scripts
Anaconda 安装路径\Library\bin
```
检测是否安装成功，win+R 打开 cmd，输入 conda -V，如果出现 Anaconda 版本号，说明安装和环境设置无误。
参考：[Anaconda 安装（过程详细）](https://zhuanlan.zhihu.com/p/464219687?utm_id=0) 。


## 4、安装 PyCharm/VSCode

分别在 pycharm/vscode 官网下载较新的安装包，选定安装路径后默认安装即可。
其中 pycharm 需要在移植 code 时选择 **interpreter**。
如果需要选择 Anaconda 配置的虚拟环境（python）可参考：[PyCharm 使用 conda 虚拟环境](https://blog.csdn.net/qq_45122293/article/details/129314276) 。


## 5、安装虚拟环境

由于 keras 3.0（ [Keras 3.0预览版/机器之心](https://baijiahao.baidu.com/s?id=1771215458134716777&wfr=spider&for=pc) ）尚未正式发布，目前仍然选择旧版本的 keras 2.3.1，其对应的 tf 版本为 2.2.0，对应的 python 版本为 3.7。
因此需要使用 Anaconda 安装虚拟环境，即安装 python 3.7.16。
其中涉及的 Anaconda 替换源和创建虚拟环境可参考：[Anaconda 创建虚拟环境](https://blog.csdn.net/qq_49141095/article/details/130276262) 、[Anaconda 安装与换国内源教程](https://blog.csdn.net/weixin_41673825/article/details/123901866) 。
另外，tesorflow 和 keras 的对应版本可参考：[Tensorflow 和 Keras 版本对应关系](https://zhuanlan.zhihu.com/p/486277263?utm_id=0) 。


## 6、安装 tensorflow/keras

使用 **管理员权限** 打开 Anaconda Powershell Prompt，使用命令 conda activate python37 激活已安装的 python 3.7.16 的虚拟环境，在这个虚拟环境中分别安装 tensorflow 和 keras。
最终二者的版本分别为，tensorflow 2.2.0，keras 2.3.1。
以上两个 DL 库的安装可参考：[TensorFlow 详细配置](https://blog.csdn.net/weixin_43763292/article/details/131277246) 、[Keras 环境的安装](https://blog.csdn.net/Alexa_/article/details/123801758) 。


## 7、安装 torch

同上一步打开虚拟环境 python37，并安装 torch，主要包括以下三步：

- 首先，参考 [pytorch-cpu 或 gpu 离线或在线高速下载安装](https://blog.csdn.net/ShenWeiKKX/article/details/103534376) 一文，在 [torch 官网](https://pytorch.org/) 选定对应的 OS、package、language、compute platform 下需要的 **command**，在 Anaconda 的终端输出该命令执行安装操作。
- 其次，如果属于教育网，一般可以直接完成安装。如果普通网络，需要借助不同的 **源**（如清华源等）进行下载安装。
- 第三，通常 torch 包自身会出现下载超时的问题，此时可参考 [在线＋离线安装 pytorch 经历](https://blog.csdn.net/qq_43556824/article/details/131169115) 一文解决，即从 [清华源](https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/pytorch/win-64/) 下载 Anaconda 安装失败的 torch 包（约 135MB）并执行 **离线安装**（以下路径为本地安装包路径）:
```
conda install E:\anaconda\pkgs\pytorch-1.13.1-py3.7_cpu_0.tar.bz2
```
至此，torch 库安装结束，最终安装成功的 torch 版本为 1.13.1。


## 8、测试
测试 tensorflow、keras、torch 是否安装成功，只需在修改了 python interpreter 的 pycharm 中编写如下代码：
```
import keras
import tensorflow
import torch

print(keras.__version__)
print(tensorflow.__version__)
print(torch.__version__)
```
本地 PC 会显示：
```
2.3.1
2.2.0
1.13.1
```
说明三个 DL 库均安装成功。




![](https://img-blog.csdnimg.cn/e412c1e721fa4535a5d8b16f730bcb48.png#pic_center)






















